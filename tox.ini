[tox]
envlist = py27,coverage

[testenv]
deps =
    -r{toxinidir}/requirements.txt
    -r{toxinidir}/tests/requirements.txt
commands =
    coverage erase
    py.test --cov=pyhelm --cov-report=
    py.test --cov=hapi --cov-report= --cov-append

[testenv:py27]
basepython = python2.7

[testenv:coverage]
commands =
    coverage report
    coverage xml -o {toxworkdir}/coverage.xml
    coverage html -d {toxworkdir}/htmlcov

[flake8]
ignore=E302,H306
exclude= libgit2-0.24.0, .git, .idea, .tox, *.egg-info, *.eggs, bin, dist, hapi
